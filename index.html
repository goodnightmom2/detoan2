<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề Thi Cuối Kỳ 1 Toán 11 - Theo Ma Trận Đặc Tả</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; background-color: #f4f6f8; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1, h2 { color: #2c3e50; }
        h1 { text-align: center; border-bottom: 3px solid #3498db; padding-bottom: 15px; margin-bottom: 30px; }
        h2 { background-color: #eaf2f8; padding: 12px; border-left: 6px solid #3498db; margin-top: 40px; font-size: 1.3rem; border-radius: 4px; }
        
        /* Đồng hồ đếm ngược */
        .timer-sticky { position: sticky; top: 10px; background: #e74c3c; color: white; padding: 12px 25px; border-radius: 30px; text-align: center; font-weight: bold; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.2); width: fit-content; margin: 0 auto 20px auto; font-size: 1.1rem; }
        
        /* Khung câu hỏi */
        .question-item { margin-bottom: 25px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; background: #fff; transition: all 0.3s ease; }
        .question-text { font-weight: 600; color: #34495e; margin-bottom: 15px; font-size: 1.05rem; }
        
        /* Trắc nghiệm lựa chọn */
        .options label { display: block; margin-bottom: 10px; padding: 10px; border-radius: 6px; cursor: pointer; transition: background 0.2s; border: 1px solid transparent; }
        .options label:hover { background-color: #f8f9fa; border-color: #dee2e6; }
        
        /* Trắc nghiệm Đúng Sai */
        .tf-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .tf-table th, .tf-table td { border: 1px solid #dee2e6; padding: 12px; text-align: center; }
        .tf-table th { background-color: #f1f3f5; color: #495057; }
        .tf-table td:first-child { text-align: left; font-weight: 500; width: 70%; }
        
        /* Trả lời ngắn */
        .short-ans-input { width: 100%; max-width: 300px; padding: 10px; border: 2px solid #dfe6e9; border-radius: 6px; font-size: 16px; transition: border 0.3s; }
        .short-ans-input:focus { border-color: #3498db; outline: none; }
        
        /* Nút nộp bài */
        .btn-submit { display: block; width: 100%; padding: 18px; background: #27ae60; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 40px; transition: background 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn-submit:hover { background: #219150; }
        .btn-submit:disabled { background: #95a5a6; cursor: not-allowed; box-shadow: none; }
        
        /* Kết quả và Giải thích */
        .result-section { margin-top: 40px; padding: 25px; background: #d4edda; border: 2px solid #c3e6cb; border-radius: 8px; color: #155724; display: none; text-align: center; }
        .explanation-box { display: none; margin-top: 15px; padding: 15px; background-color: #fff3cd; border-left: 5px solid #ffc107; font-size: 0.95em; border-radius: 4px; color: #856404; }
        
        /* Style cho đáp án đúng/sai khi chấm */
        .correct-answer-bg { background-color: #d4edda !important; border: 1px solid #c3e6cb !important; }
        .wrong-answer-bg { background-color: #f8d7da !important; border: 1px solid #f5c6cb !important; }
        .correct-text { color: #28a745; font-weight: bold; }
        .wrong-text { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>

<div class="timer-sticky" id="timer">Thời gian còn lại: 60:00</div>

<div class="container">
    <h1>ĐỀ KIỂM TRA CUỐI KỲ 1 TOÁN 11</h1>
    <p style="text-align: center;"><i>(Cấu trúc bám sát Ma trận & Đặc tả )</i></p>

    <form id="quizForm">
        
        <h2>PHẦN I. TRẮC NGHIỆM NHIỀU LỰA CHỌN (3,0 điểm)</h2>
        <p><i>Thí sinh chọn 01 phương án đúng nhất cho mỗi câu hỏi. Mỗi câu đúng 0,3 điểm.</i></p>

        <div class="question-item" id="q1-box">
            <div class="question-text">Câu 1[cite: 7]: Công thức lượng giác nào sau đây sai?</div>
            <div class="options">
                <label><input type="radio" name="q1" value="A"> A. \(\sin^2 x + \cos^2 x = 1\)</label>
                <label><input type="radio" name="q1" value="B"> B. \(1 + \tan^2 x = \frac{1}{\cos^2 x}\) (với \(\cos x \neq 0\))</label>
                <label><input type="radio" name="q1" value="C"> C. \(\sin 2x = 2\sin x \cos x\)</label>
                <label><input type="radio" name="q1" value="D"> D. \(\cos 2x = \sin^2 x - \cos^2 x\)</label>
            </div>
            <div class="explanation-box" id="exp-q1">
                <b>Đáp án D.</b><br>
                Công thức đúng là \(\cos 2x = \cos^2 x - \sin^2 x\).
            </div>
        </div>

        <div class="question-item" id="q2-box">
            <div class="question-text">Câu 2[cite: 7]: Nghiệm của phương trình \(\cos x = \frac{1}{2}\) là:</div>
            <div class="options">
                <label><input type="radio" name="q2" value="A"> A. \(x = \pm \frac{\pi}{3} + k2\pi\)</label>
                <label><input type="radio" name="q2" value="B"> B. \(x = \pm \frac{\pi}{6} + k2\pi\)</label>
                <label><input type="radio" name="q2" value="C"> C. \(x = \frac{\pi}{3} + k2\pi\)</label>
                <label><input type="radio" name="q2" value="D"> D. \(x = \pm \frac{\pi}{3} + k\pi\)</label>
            </div>
            <div class="explanation-box" id="exp-q2">
                <b>Đáp án A.</b><br>
                Ta có \(\cos \frac{\pi}{3} = \frac{1}{2}\), nên nghiệm là \(x = \pm \frac{\pi}{3} + k2\pi\).
            </div>
        </div>

        <div class="question-item" id="q3-box">
            <div class="question-text">Câu 3[cite: 7]: Cho cấp số cộng \((u_n)\) biết \(u_1 = 2\) và công sai \(d = 3\). Số hạng thứ 5 (\(u_5\)) là:</div>
            <div class="options">
                <label><input type="radio" name="q3" value="A"> A. 14</label>
                <label><input type="radio" name="q3" value="B"> B. 17</label>
                <label><input type="radio" name="q3" value="C"> C. 11</label>
                <label><input type="radio" name="q3" value="D"> D. 8</label>
            </div>
            <div class="explanation-box" id="exp-q3">
                <b>Đáp án A.</b><br>
                Công thức: \(u_n = u_1 + (n-1)d\).<br>
                \(u_5 = 2 + (5-1).3 = 2 + 12 = 14\).
            </div>
        </div>

        <div class="question-item" id="q4-box">
            <div class="question-text">Câu 4[cite: 7]: Cho cấp số nhân \((u_n)\) có \(u_1 = -3\) và công bội \(q = 2\). Số hạng tổng quát \(u_n\) là:</div>
            <div class="options">
                <label><input type="radio" name="q4" value="A"> A. \(u_n = -3 \cdot 2^{n-1}\)</label>
                <label><input type="radio" name="q4" value="B"> B. \(u_n = -3 \cdot 2^n\)</label>
                <label><input type="radio" name="q4" value="C"> C. \(u_n = -3 + 2(n-1)\)</label>
                <label><input type="radio" name="q4" value="D"> D. \(u_n = 2 \cdot (-3)^{n-1}\)</label>
            </div>
            <div class="explanation-box" id="exp-q4">
                <b>Đáp án A.</b><br>
                Công thức SHTQ của CSN là \(u_n = u_1 \cdot q^{n-1}\).
            </div>
        </div>

        <div class="question-item" id="q5-box">
            <div class="question-text">Câu 5[cite: 7]: Dãy số nào sau đây có giới hạn bằng 0?</div>
            <div class="options">
                <label><input type="radio" name="q5" value="A"> A. \(u_n = n^3\)</label>
                <label><input type="radio" name="q5" value="B"> B. \(u_n = \left(\frac{1}{3}\right)^n\)</label>
                <label><input type="radio" name="q5" value="C"> C. \(u_n = \left(\frac{4}{3}\right)^n\)</label>
                <label><input type="radio" name="q5" value="D"> D. \(u_n = 2n + 1\)</label>
            </div>
            <div class="explanation-box" id="exp-q5">
                <b>Đáp án B.</b><br>
                Giới hạn \(q^n = 0\) khi \(|q| < 1\). Ở đây \(|\frac{1}{3}| < 1\).
            </div>
        </div>

        <div class="question-item" id="q6-box">
            <div class="question-text">Câu 6[cite: 7]: Tính giới hạn \(\lim_{x \to 2} (x^2 - 3x + 5)\).</div>
            <div class="options">
                <label><input type="radio" name="q6" value="A"> A. 15</label>
                <label><input type="radio" name="q6" value="B"> B. 3</label>
                <label><input type="radio" name="q6" value="C"> C. 5</label>
                <label><input type="radio" name="q6" value="D"> D. 7</label>
            </div>
            <div class="explanation-box" id="exp-q6">
                <b>Đáp án B.</b><br>
                Hàm đa thức liên tục trên R, thay trực tiếp \(x=2\) vào: \(2^2 - 3(2) + 5 = 4 - 6 + 5 = 3\).
            </div>
        </div>

        <div class="question-item" id="q7-box">
            <div class="question-text">Câu 7[cite: 7]: Cho hàm số \(f(x) = \frac{x+1}{x-2}\). Hàm số gián đoạn tại điểm nào?</div>
            <div class="options">
                <label><input type="radio" name="q7" value="A"> A. \(x = -1\)</label>
                <label><input type="radio" name="q7" value="B"> B. \(x = 0\)</label>
                <label><input type="radio" name="q7" value="C"> C. \(x = 2\)</label>
                <label><input type="radio" name="q7" value="D"> D. \(x = 1\)</label>
            </div>
            <div class="explanation-box" id="exp-q7">
                <b>Đáp án C.</b><br>
                Hàm số phân thức hữu tỉ xác định và liên tục trên tập xác định. Tại \(x=2\) mẫu số bằng 0, hàm không xác định nên gián đoạn.
            </div>
        </div>

        <div class="question-item" id="q8-box">
            <div class="question-text">Câu 8[cite: 7]: Cho đường thẳng \(d\) không nằm trong mặt phẳng \((\alpha)\). Điều kiện để \(d \parallel (\alpha)\) là:</div>
            <div class="options">
                <label><input type="radio" name="q8" value="A"> A. \(d\) vuông góc với \((\alpha)\).</label>
                <label><input type="radio" name="q8" value="B"> B. \(d\) song song với một đường thẳng \(a\) nằm trong \((\alpha)\).</label>
                <label><input type="radio" name="q8" value="C"> C. \(d\) cắt \((\alpha)\).</label>
                <label><input type="radio" name="q8" value="D"> D. \(d\) chéo với mọi đường thẳng trong \((\alpha)\).</label>
            </div>
            <div class="explanation-box" id="exp-q8">
                <b>Đáp án B.</b><br>
                Định lý: Nếu đường thẳng \(d \not\subset (\alpha)\) và \(d\) song song với đường thẳng \(a \subset (\alpha)\) thì \(d \parallel (\alpha)\).
            </div>
        </div>

        <div class="question-item" id="q9-box">
            <div class="question-text">Câu 9[cite: 7]: Cho hình lăng trụ \(ABC.A'B'C'\). Mặt phẳng \((ABC)\) song song với mặt phẳng nào?</div>
            <div class="options">
                <label><input type="radio" name="q9" value="A"> A. \((ABB'A')\)</label>
                <label><input type="radio" name="q9" value="B"> B. \((BCC'B')\)</label>
                <label><input type="radio" name="q9" value="C"> C. \((A'B'C')\)</label>
                <label><input type="radio" name="q9" value="D"> D. \((ACC'A')\)</label>
            </div>
            <div class="explanation-box" id="exp-q9">
                <b>Đáp án C.</b><br>
                Trong hình lăng trụ, hai mặt đáy song song với nhau.
            </div>
        </div>

        <div class="question-item" id="q10-box">
            <div class="question-text">Câu 10[cite: 7]: Cho mẫu số liệu ghép nhóm thời gian làm bài (phút): [10; 20): 5 HS, [20; 30): 15 HS, [30; 40): 10 HS. Nhóm chứa mốt là:</div>
            <div class="options">
                <label><input type="radio" name="q10" value="A"> A. [10; 20)</label>
                <label><input type="radio" name="q10" value="B"> B. [20; 30)</label>
                <label><input type="radio" name="q10" value="C"> C. [30; 40)</label>
                <label><input type="radio" name="q10" value="D"> D. Cả 3 nhóm</label>
            </div>
            <div class="explanation-box" id="exp-q10">
                <b>Đáp án B.</b><br>
                Nhóm chứa mốt là nhóm có tần số lớn nhất (15). Vậy là nhóm [20; 30).
            </div>
        </div>

        <h2>PHẦN II. TRẮC NGHIỆM ĐÚNG SAI (4,0 điểm)</h2>
        <p><i>Thí sinh trả lời từng ý a, b, c, d. (Đúng 1 ý: 0.1đ; 2 ý: 0.25đ; 3 ý: 0.5đ; 4 ý: 1.0đ)</i></p>

        <div class="question-item" id="tf1-box">
            <div class="question-text">Câu 1: Cho phương trình lượng giác \(\sin 2x = -\frac{\sqrt{3}}{2}\).</div>
            <table class="tf-table">
                <tr><th>Nội dung</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Phương trình có nghiệm \(x = -\frac{\pi}{6} + k\pi\).</td>
                    <td><input type="radio" name="tf1a" value="true"></td>
                    <td><input type="radio" name="tf1a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Phương trình tương đương với \(\sin 2x = \sin\left(-\frac{\pi}{3}\right)\).</td>
                    <td><input type="radio" name="tf1b" value="true"></td>
                    <td><input type="radio" name="tf1b" value="false"></td>
                </tr>
                <tr>
                    <td>c) Nghiệm dương nhỏ nhất của phương trình là \(x = \frac{\pi}{3}\).</td>
                    <td><input type="radio" name="tf1c" value="true"></td>
                    <td><input type="radio" name="tf1c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Có 2 điểm biểu diễn nghiệm của phương trình trên đường tròn lượng giác.</td>
                    <td><input type="radio" name="tf1d" value="true"></td>
                    <td><input type="radio" name="tf1d" value="false"></td>
                </tr>
            </table>
            <div class="explanation-box" id="exp-tf1">
                <b>Giải thích:</b><br>
                a) <b>Đúng.</b> Họ nghiệm thứ nhất: \(2x = -\frac{\pi}{3} + k2\pi \Rightarrow x = -\frac{\pi}{6} + k\pi\).<br>
                b) <b>Đúng.</b> Vì \(\sin(-\pi/3) = -\sqrt{3}/2\).<br>
                c) <b>Sai.</b> Nghiệm: \(-\frac{\pi}{6}+k\pi\) (với k=1 \(\to 5\pi/6\)) và \(2x = \pi - (-\frac{\pi}{3}) + k2\pi \Rightarrow x = \frac{2\pi}{3} + k\pi\). Nghiệm dương nhỏ nhất là \(2\pi/3\) (k=0 của họ 2) hoặc \(5\pi/6\). Chờ đã, \(k=1\) ở họ 1 ra \(5\pi/6\). Họ 2: \(x = 2\pi/3\). Vậy nhỏ nhất là \(2\pi/3\).<br>
                d) <b>Sai.</b> Do \(2x\), chu kỳ là \(k\pi\). Mỗi họ nghiệm có 2 điểm biểu diễn. Tổng là 4 điểm.
            </div>
        </div>

        <div class="question-item" id="tf2-box">
            <div class="question-text">Câu 2: Cước phí gửi xe tại một bãi xe được tính như sau: 10.000đ cho giờ đầu tiên (hoặc ít hơn) và 5.000đ cho mỗi giờ tiếp theo (hoặc phần lẻ của giờ). Xét hàm số chi phí \(C(t)\) theo thời gian \(t\) (giờ).</div>
            <table class="tf-table">
                <tr><th>Nội dung</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Nếu gửi xe 30 phút (0.5 giờ), chi phí là 5.000đ.</td>
                    <td><input type="radio" name="tf2a" value="true"></td>
                    <td><input type="radio" name="tf2a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Nếu gửi xe 1.5 giờ, chi phí là 15.000đ.</td>
                    <td><input type="radio" name="tf2b" value="true"></td>
                    <td><input type="radio" name="tf2b" value="false"></td>
                </tr>
                <tr>
                    <td>c) Hàm số \(C(t)\) liên tục tại \(t=1\).</td>
                    <td><input type="radio" name="tf2c" value="true"></td>
                    <td><input type="radio" name="tf2c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Giới hạn bên phải của hàm số tại \(t=1\) là 15.000đ (\(\lim_{t \to 1^+} C(t) = 15000\)).</td>
                    <td><input type="radio" name="tf2d" value="true"></td>
                    <td><input type="radio" name="tf2d" value="false"></td>
                </tr>
            </table>
            <div class="explanation-box" id="exp-tf2">
                <b>Giải thích:</b><br>
                a) <b>Sai.</b> Dưới 1 giờ vẫn tính giá mở cửa là 10.000đ.<br>
                b) <b>Đúng.</b> 10k (1h đầu) + 5k (0.5h tiếp theo) = 15.000đ.<br>
                c) <b>Sai.</b> Tại t=1 giá 10k. Tại t > 1 giá nhảy lên 15k. Hàm gián đoạn.<br>
                d) <b>Đúng.</b> Khi thời gian vừa vượt qua 1 giờ, giá cước chuyển sang mức tiếp theo.
            </div>
        </div>

        <div class="question-item" id="tf3-box">
            <div class="question-text">Câu 3: Cho hình chóp S.ABCD có đáy là hình bình hành tâm O. Gọi M, N lần lượt là trung điểm của SA và SC.</div>
            <table class="tf-table">
                <tr><th>Nội dung</th><th>Đúng</th><th>Sai</th></tr>
                <tr>
                    <td>a) Đường thẳng MN song song với mặt phẳng (ABCD).</td>
                    <td><input type="radio" name="tf3a" value="true"></td>
                    <td><input type="radio" name="tf3a" value="false"></td>
                </tr>
                <tr>
                    <td>b) Giao tuyến của (SAB) và (SCD) là đường thẳng đi qua S và song song với AB.</td>
                    <td><input type="radio" name="tf3b" value="true"></td>
                    <td><input type="radio" name="tf3b" value="false"></td>
                </tr>
                <tr>
                    <td>c) MN vuông góc với BD.</td>
                    <td><input type="radio" name="tf3c" value="true"></td>
                    <td><input type="radio" name="tf3c" value="false"></td>
                </tr>
                <tr>
                    <td>d) Mặt phẳng (BMN) cắt cạnh SD tại trung điểm P của SD.</td>
                    <td><input type="radio" name="tf3d" value="true"></td>
                    <td><input type="radio" name="tf3d" value="false"></td>
                </tr>
            </table>
            <div class="explanation-box" id="exp-tf3">
                <b>Giải thích:</b><br>
                a) <b>Đúng.</b> MN là đường trung bình tam giác SAC \(\Rightarrow MN \parallel AC\). Mà \(AC \subset (ABCD) \Rightarrow MN \parallel (ABCD)\).<br>
                b) <b>Đúng.</b> \(AB \parallel CD\), giao tuyến của 2 mp chứa 2 đường song song sẽ đi qua điểm chung S và song song với chúng.<br>
                c) <b>Sai.</b> \(MN \parallel AC\). Trong hình bình hành, AC không nhất thiết vuông góc BD (chỉ đúng với hình thoi/vuông).<br>
                d) <b>Sai.</b> Giao tuyến của (BMN) với (SBD) là BO (O thuộc MN). BO kéo dài cắt SD tại D. Vậy giao điểm là D, không phải trung điểm.
            </div>
        </div>

        <h2>PHẦN III. TRẢ LỜI NGẮN (3,0 điểm)</h2>
        <p><i>Mỗi câu trả lời đúng được 1,0 điểm.</i></p>

        <div class="question-item" id="sa1-box">
            <div class="question-text">Câu 1: Một quả bóng cao su được thả rơi từ độ cao 12m. Mỗi lần chạm đất, nó nảy lên được độ cao bằng \(\frac{2}{3}\) độ cao lần rơi trước đó. Tổng quãng đường quả bóng di chuyển (lên và xuống) cho đến khi dừng lại hẳn là bao nhiêu mét?</div>
            <input type="text" class="short-ans-input" id="sa1" placeholder="Nhập số (VD: 50)">
            <div class="explanation-box" id="exp-sa1">
                <b>Đáp án: 60</b>.<br>
                Quãng đường xuống: \(S_1 = 12 + 12(\frac{2}{3}) + ...\) (CSN lùi vô hạn \(u_1=12, q=2/3\)) \(\to S_1 = \frac{12}{1-2/3} = 36\).<br>
                Quãng đường lên: \(S_2 = 12(\frac{2}{3}) + ...\) (CSN lùi vô hạn \(u_1=8, q=2/3\)) \(\to S_2 = \frac{8}{1-2/3} = 24\).<br>
                Tổng = 36 + 24 = 60m.
            </div>
        </div>

        <div class="question-item" id="sa2-box">
            <div class="question-text">Câu 2: Tìm giá trị của tham số \(a\) để hàm số \(f(x) = \begin{cases} \frac{x^2-1}{x-1} & \text{khi } x \neq 1 \\ a+2 & \text{khi } x = 1 \end{cases}\) liên tục tại \(x = 1\).</div>
            <input type="text" class="short-ans-input" id="sa2" placeholder="Nhập số...">
            <div class="explanation-box" id="exp-sa2">
                <b>Đáp án: 0</b>.<br>
                \(\lim_{x \to 1} \frac{x^2-1}{x-1} = \lim_{x \to 1} (x+1) = 2\).<br>
                Để hàm liên tục, \(f(1) = 2 \Rightarrow a + 2 = 2 \Rightarrow a = 0\).
            </div>
        </div>

        <div class="question-item" id="sa3-box">
            <div class="question-text">Câu 3: Cho hình chóp S.ABCD có đáy là hình bình hành. Một mặt phẳng (P) đi qua AB và cắt cạnh SC tại M sao cho \(\frac{SM}{SC} = \frac{2}{3}\). Mặt phẳng (P) cắt cạnh SD tại N. Tính tỉ số \(\frac{SN}{SD}\). (Nhập kết quả dưới dạng phân số tối giản a/b).</div>
            <input type="text" class="short-ans-input" id="sa3" placeholder="VD: 1/2">
            <div class="explanation-box" id="exp-sa3">
                <b>Đáp án: 2/3</b>.<br>
                Vì \(AB \parallel CD\), và (P) chứa AB, cắt (SCD) theo giao tuyến MN. Suy ra \(MN \parallel CD\).<br>
                Trong tam giác SCD, \(MN \parallel CD\), theo định lý Thales: \(\frac{SN}{SD} = \frac{SM}{SC} = \frac{2}{3}\).
            </div>
        </div>

        <button type="button" class="btn-submit" onclick="submitQuiz()">NỘP BÀI</button>
        
        <div class="result-section" id="result-box">
            <h2>KẾT QUẢ: <span id="score-display">0</span>/10</h2>
            <p>Hãy xem lại hướng dẫn giải chi tiết ở phía trên (được tô màu vàng).</p>
        </div>

    </form>
</div>

<script>
    // Config đáp án
    const answers = {
        // Phần 1
        q1: "D", q2: "A", q3: "A", q4: "A", q5: "B", 
        q6: "B", q7: "C", q8: "B", q9: "C", q10: "B",
        // Phần 2 (True/False)
        tf1: { a: "true", b: "true", c: "false", d: "false" },
        tf2: { a: "false", b: "true", c: "false", d: "true" },
        tf3: { a: "true", b: "true", c: "false", d: "false" },
        // Phần 3 (Short answer - mảng các đáp án chấp nhận được)
        sa1: ["60"],
        sa2: ["0"],
        sa3: ["2/3"]
    };

    // Timer Logic
    let timeInSeconds = 60 * 60; // 60 minutes
    const timerElement = document.getElementById('timer');
    
    const countdown = setInterval(() => {
        const minutes = Math.floor(timeInSeconds / 60);
        let seconds = timeInSeconds % 60;
        seconds = seconds < 10 ? '0' + seconds : seconds;
        timerElement.innerHTML = `Thời gian còn lại: ${minutes}:${seconds}`;
        timeInSeconds--;
        
        if (timeInSeconds < 0) {
            clearInterval(countdown);
            alert("Đã hết thời gian làm bài!");
            submitQuiz();
        }
    }, 1000);

    function submitQuiz() {
        clearInterval(countdown);
        let totalScore = 0;
        const form = document.getElementById('quizForm');
        
        // --- CHẤM PHẦN 1 (0.3đ/câu) ---
        for (let i = 1; i <= 10; i++) {
            const qKey = 'q' + i;
            const userAns = form.elements[qKey].value;
            const box = document.getElementById(qKey + '-box');
            
            // Hiện đáp án
            document.getElementById('exp-' + qKey).style.display = 'block';

            if (userAns === answers[qKey]) {
                totalScore += 0.3;
                box.classList.add('correct-answer-bg');
            } else {
                if(userAns) box.classList.add('wrong-answer-bg');
            }
        }

        // --- CHẤM PHẦN 2 (Item banking: 0.1 - 0.25 - 0.5 - 1.0) ---
        for (let i = 1; i <= 3; i++) {
            let correctCount = 0;
            const parts = ['a', 'b', 'c', 'd'];
            const box = document.getElementById('tf' + i + '-box');

            // Hiện đáp án
            document.getElementById('exp-tf' + i).style.display = 'block';
            
            parts.forEach(p => {
                const key = 'tf' + i + p;
                const userVal = form.elements[key].value;
                if (userVal === answers['tf' + i][p]) {
                    correctCount++;
                }
            });

            // Cộng điểm theo thang
            if (correctCount === 1) totalScore += 0.1;
            else if (correctCount === 2) totalScore += 0.25;
            else if (correctCount === 3) totalScore += 0.5;
            else if (correctCount === 4) totalScore += 1.0;
        }

        // --- CHẤM PHẦN 3 (1.0đ/câu) ---
        for (let i = 1; i <= 3; i++) {
            const key = 'sa' + i;
            const userAns = document.getElementById(key).value.trim();
            const box = document.getElementById(key + '-box');

            document.getElementById('exp-' + key).style.display = 'block';

            if (answers[key].includes(userAns)) {
                totalScore += 1.0;
                box.classList.add('correct-answer-bg');
            } else {
                box.classList.add('wrong-answer-bg');
            }
        }

        // Hiển thị điểm
        totalScore = Math.round(totalScore * 100) / 100;
        const scoreDisplay = document.getElementById('score-display');
        scoreDisplay.innerText = totalScore;
        document.getElementById('result-box').style.display = 'block';
        
        // Disable nút nộp
        document.querySelector('.btn-submit').disabled = true;
        document.querySelector('.btn-submit').innerText = "ĐÃ NỘP BÀI";
        
        // Scroll xuống kết quả
        document.getElementById('result-box').scrollIntoView({behavior: 'smooth'});
    }
</script>

</body>
</html>
